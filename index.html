<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1,minimum-scale=1,user-scalable=no">
    <title>C01-页面加载执行动画.html</title>
    <link rel="stylesheet" href="./assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="./assets/Swiper-3.4.2/dist/css/swiper.min.css">
    <link rel="stylesheet" href="./css/index.css">
</head>
<!--[if lte IE 8]>
    <script src="./js/lib/html5shiv.min.js"></script>
<![endif]-->

<body>
    <!--自己实现全屏滚动
        结构:=>内外层,内层套模块,以外层盒子的高度为单位,滚动相应的距离
    -->


    <div class="view">
        <!--欢迎界面  -->
        <div class="wel">
        </div>
        <!--主页面  -->
        <div class="main">
            <!--导航条  -->
            <nav>
                <div class="row">
                    <div class="col-xs-6">
                        <div class="logo">
                            <h1><a href="javascript:;">╮(╯_╰)╭</a></h1>
                        </div>
                    </div>
                    <div class="col-xs-6">

                        <div class="menu">
                            <ul>
                                <li><a href="javascript:;">主页</a></li>
                                <li><a href="javascript:;">书屋</a></li>
                                <li><a href="javascript:;">音乐</a></li>
                                <li><a href="javascript:;">猫</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </nav>
            <!--内容  -->
            <main>
                <div class="container">
                    <div class="con-item">
                        <div class="theme"></div>
                        <div class="leader">
                            <h3>东野圭吾 《解忧杂货铺》</h3>
                            <p>人与人之间情断义绝，并不需要什么具体理由，就算表面上有，也很可能只是心已经离开的结果，事后才编造出的借口而已。</p>
                            <a href="javascript:;" class="btn btn-danger col-xs-2 col-xs-offset-9">Go></a>
                        </div>
                    </div>
                    <div class="con-item">
                        <div class="theme"></div>
                        <div class="leader">
                            <h3>One Ok Rock 《Clock Strikes》</h3>
                            <p>Believe that time is always forever</p>
                            <p>and I'll always be here</p>
                            <a href="javascript:;" class="btn btn-danger col-xs-2 col-xs-offset-9">Go></a>
                        </div>
                    </div>
                    <div class="con-item">
                        <div class="theme"></div>
                        <div class="leader">
                            <h3>多丽丝·莱辛 《特别的猫》</h3>
                            <p>不管怎样，在那遥远的过往，曾有一个小女孩，为了一只猫咪顽强抗争到底，终于为自己赢得了一位日夜相伴的贴心伙伴，但到了最后，她终究还是失去了他。</p>
                            <a href="javascript:;" class="btn btn-danger col-xs-2 col-xs-offset-9">Go></a>
                        </div>
                    </div>
                </div>
                <ul class="sorter">
                </ul>
            </main>
        </div>

    </div>


    <script src="./js/lib/jquery-1.12.4.js"></script>
    <script src="./assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="./assets/Swiper-3.4.2/dist/js/swiper.min.js"></script>
    <script>
        window.onload = function () {
            var viewDom = document.querySelector(".view");
            viewDom.classList.add("animation")
            //可以利用设置定时器的方式在动画执行完之后跳转到另一个页面
            var flag = 0;
            var timer = setInterval(function () {
                $(".view").animate({ top: -($("body").height()) }, function () {
                    $(this).css({ top: 0 });
                    $(".wel").remove();
                })
                flag++;
                flag && clearInterval(timer);
            }, 3000)

            var $Con = $(".container");
            var d = 0;
            var flag = true;
            $Con.find(".con-item").each(function(){
                $(document.createElement("li")).appendTo($(".sorter"));
            })
            window.onmousewheel = function (event) {
                var height = $(".container").height();
                if ($(event.srcElement).hasClass("theme") && flag) {
                    flag = false;
                    if (event.wheelDelta > 0) {
                        d == 0 ? d = 0 : d++;
                    }
                    else {
                        d == -2 ? d = -2 : d--;
                    }
                    $Con.stop().animate({ top: d * height }, function () {
                        flag = true;
                    })
                }
            }



            //页面大小改变时让元素更改大小,适应屏幕的大小=>onresize或者媒体查询??
            window.onresize = function () {
                $Con.stop().animate({ top: -($Con.height()) }, 0)
            }
        }
    </script>


</body>

</html>